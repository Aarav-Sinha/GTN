<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reaction Test Protocol</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;500;700&display=swap" rel="stylesheet">
<style>
/* --- Root Variables for Dark Mode (Default) --- */
:root {
    /* NEW COLORS: Cosmic Violet Scheme */
    --color-primary: #7e57c2;       /* Deep Violet */
    --color-secondary: #00e676;     /* Bright Neon Green (For reaction cue) */
    --color-accent: #ff9800;        /* Gold/Orange Accent */
    --color-error: #f44336;         /* Red */
    --color-success: #2196F3;       /* Blue for High Score */
    --color-text: #e0e6f0;
    --box-background: rgba(15, 5, 25, 0.9); /* Dark background for the box */
    --modal-bg: #0A001A;
}

/* --- Light Mode Overrides (NEW: Soft Lavender Scheme) --- */
body.light-mode {
    background: linear-gradient(135deg, #FFFFFF, #E6E0FF, #FFFFFF);
    background-size: 400% 400%;
    color: #333;
    --color-primary: #5e35b1;       /* Darker Violet */
    --color-secondary: #00c853;     /* Darker Green */
    --color-accent: #e65100;
    --color-error: #c62828;
    --color-success: #1976D2;
    --color-text: #333;
    --box-background: rgba(255, 255, 255, 0.95);
    --modal-bg: #f5f8ff;
}

body {
    margin: 0;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: 'Montserrat', sans-serif;
    
    /* BACKGROUND (Dark): Cosmic Violet Gradient (Different from Blue/Indigo) */
    background: linear-gradient(135deg, #0A001A, #3A105D, #0A001A);
    background-size: 400% 400%;
    animation: gradientBG 15s ease infinite;
    
    color: var(--color-text);
    overflow: hidden;
    transition: color 0.3s, background 0.3s;
}
@keyframes gradientBG {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

/* --- Game Box and Core Elements --- */
#game-box {
    background: var(--box-background);
    backdrop-filter: blur(18px);
    border-radius: 15px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    padding: 25px 40px 30px;
    width: 600px;
    max-width: 90%;
    box-shadow: 0 0 50px rgba(0,0,0,0.7);
    text-align: center;
    position: relative;
    height: auto;
    transition: all 0.3s ease;
    z-index: 1;
}
body.light-mode #game-box {
    border: 1px solid rgba(0, 0, 0, 0.15);
    box-shadow: 0 0 30px rgba(0,0,0,0.25);
}

h2 { 
    font-size: 32px; 
    font-weight: 700; 
    letter-spacing: 2px; 
    color: var(--color-text); 
    text-shadow: 0 0 10px rgba(126, 87, 194, 0.5);
    margin-bottom: 5px;
}
body.light-mode h2 { text-shadow: none; color: var(--color-primary); }

#result-display { 
    font-size: 16px; 
    font-weight: 500; 
    margin-bottom: 20px; 
    color: var(--color-secondary); 
    text-transform: uppercase; 
}

/* --- Reaction Area (Main Clickable Element) --- */
#reaction-area {
    width: 100%;
    height: 350px;
    background-color: var(--color-primary); /* Default state color */
    border-radius: 15px;
    margin: 20px 0;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    transition: background-color 0.2s, transform 0.1s;
    box-shadow: 0 8px 15px rgba(0,0,0,0.5);
}
#reaction-area:active {
    transform: scale(0.99);
}

#status-text {
    font-size: 40px;
    font-weight: 700;
    color: white;
    text-shadow: 0 0 10px rgba(0,0,0,0.5);
    padding: 10px;
}

#instruction-text {
    font-size: 18px;
    font-weight: 500;
    color: rgba(255, 255, 255, 0.8);
    margin-top: 10px;
}

/* State Classes */
#reaction-area.state-waiting {
    background-color: #5d5d5d; /* Dark Gray */
    box-shadow: 0 0 20px rgba(255, 255, 255, 0.1);
}
#reaction-area.state-ready {
    background-color: var(--color-secondary); /* Neon Green */
    box-shadow: 0 0 30px var(--color-secondary);
}
#reaction-area.state-error {
    background-color: var(--color-error); /* Red */
    box-shadow: 0 0 30px var(--color-error);
}

/* --- Standard Button Styling --- */
button { 
    background: var(--color-primary); 
    border: none; padding: 12px 22px; 
    margin: 8px 6px; border-radius: 8px; 
    color: #fff; font-size: 15px; 
    font-weight: 700;
    cursor: pointer; transition: 0.3s ease; 
    box-shadow: 0 4px 10px rgba(0,0,0,0.5); 
    text-transform: uppercase; letter-spacing: 0.5px; 
    min-width: 180px; 
    border-bottom: 3px solid #4a148c; /* Darker Violet Border */
}
button:hover { 
    background: #9575cd; 
    transform: translateY(-2px); 
    box-shadow: 0 6px 15px rgba(0,0,0,0.7); 
}

/* --- Fixed Buttons (Protocol, Index) & Icons (Settings, Chat) --- */
.fixed-btn { 
    position: fixed; 
    background: var(--color-primary); 
    border: none; padding: 10px 18px; 
    border-radius: 8px; color: #fff; 
    font-size: 14px; font-weight: 600;
    cursor: pointer; transition: 0.2s ease; 
    box-shadow: 0 4px 10px rgba(0,0,0,0.3); 
    z-index: 101; margin: 0; 
    text-transform: uppercase; 
    border-bottom: 3px solid #4a148c;
}
#indexBtn { 
    position: fixed; 
    top: 20px; left: 20px; right: auto; 
    z-index: 105; font-size: 13px; 
}
#infoBtn { 
    top: 20px; right: 20px; 
}
/* Floating Icons (Settings & Chat) */
.floating-icon { 
    position: fixed; bottom: 20px; width: 50px; height: 50px; 
    border-radius: 50%; background: var(--modal-bg); color: white; 
    line-height: 50px; text-align: center;
    cursor: pointer; box-shadow: 0 5px 15px rgba(0,0,0,0.5); 
    transition: transform 0.2s, background 0.2s; z-index: 150; 
}
#settingsIcon { 
    right: 20px; font-size: 28px; 
    border: 2px solid var(--color-primary);
}
#supportIcon { 
    right: 80px; font-size: 24px; 
    background: var(--color-primary); 
    border: 2px solid var(--color-secondary); 
}
.floating-icon:hover { 
    transform: scale(1.1) rotate(5deg); 
}

/* --- Protocol/Instructions Panel --- */
.fixed-panel-common { 
    position: fixed; right: 20px; top: 75px;
    width: 300px; background: rgba(0, 0, 0, 0.9); 
    border-radius: 10px; padding: 20px; text-align: left;
    font-size: 14px; line-height: 1.6; color: var(--color-text); 
    z-index: 100; opacity: 0; visibility: hidden; transition: 0.3s ease; 
    transform: translateX(100%); 
    border-left: 3px solid var(--color-secondary); 
    max-height: 500px; overflow-y: auto; padding-bottom: 10px;
}
.fixed-panel-common.visible { 
    opacity: 1; visibility: visible; transform: translateX(0); 
}

/* --- Floating Modals (Settings & Chat) --- */
.floating-modal { 
    position: fixed; bottom: 80px; right: 20px; 
    width: 300px; background: var(--modal-bg); 
    border-radius: 10px; box-shadow: 0 5px 20px rgba(0,0,0,0.7);
    z-index: 200; transform: scale(0.5); opacity: 0; 
    visibility: hidden; transition: all 0.3s ease; 
    transform-origin: bottom right; 
}
.floating-modal.visible { 
    transform: scale(1); opacity: 1; visibility: visible; 
}
.modal-header { 
    background: var(--color-primary); color: white; 
    padding: 10px 15px; border-radius: 10px 10px 0 0; 
    font-weight: 700; display: flex; justify-content: space-between;
    align-items: center; 
}
.chat-close-btn { 
    background: transparent; border: none; color: white; 
    font-size: 18px; cursor: pointer; padding: 0; min-width: auto; 
    box-shadow: none; margin: 0; border-bottom: none; 
}
.modal-body { 
    padding: 15px; max-height: 350px; overflow-y: auto; 
}
.setting-row { 
    display: flex; justify-content: space-between; align-items: center; 
    padding: 10px 0; border-bottom: 1px dashed rgba(255,255,255,0.1); 
}
/* Chat specific styles */
.ai-message { 
    background: rgba(0, 230, 118, 0.1); 
    color: var(--color-text); 
    padding: 8px; margin-bottom: 10px; 
    border-radius: 8px; line-height: 1.4; 
}
body.light-mode .ai-message { 
    color: var(--color-primary); 
    background: rgba(0, 200, 83, 0.1);
}
.chat-option-btn { 
    background: var(--color-secondary); 
    color: var(--modal-bg); 
    font-size: 13px; font-weight: 700; 
    width: 100%; margin: 5px 0; 
    border-bottom: 3px solid #009933; 
}
.chat-info-panel { 
    padding: 10px; border: 1px solid var(--color-accent); 
    border-radius: 8px; margin-top: 10px; 
}

/* --- Footer --- */
#footer { 
    position: fixed; 
    bottom: 10px; left: 50%; 
    transform: translateX(-50%); 
    font-size: 12px; 
    color: rgba(255, 255, 255, 0.5);
    text-shadow: 0 0 5px rgba(0,0,0,0.5); 
    z-index: 5; 
}
</style>
</head>
<body class="dark-mode">

<button id="indexBtn" class="fixed-btn" onclick="window.location.href='index.html'">&lt; BACK TO INDEX</button>
<button id="infoBtn" class="fixed-btn">Protocol | RULES</button>

<div id="settingsIcon" class="floating-icon" onclick="toggleSettingsModal()"> ‚öôÔ∏è </div>
<div id="supportIcon" class="floating-icon" onclick="toggleSupportModal()"> üí¨ </div>

<div id="instructions" class="fixed-panel-common">
    <h4>PROTOCOL GUIDELINES</h4>
    <div id="rules-content">
        <p>The **Reaction Test Protocol** is a neurological assessment designed to measure psychomotor speed. It tracks the time delay between a visual stimulus and your motor response.</p>
        <ul>
            <li>**Start**: Click START. The box will turn **gray** ("WAITING...").</li>
            <li>**Stimulus**: After a random, unpredictable delay, the box will turn **BRIGHT GREEN** ("CLICK NOW!").</li>
            <li>**Response**: Click the green box immediately. Your time in **milliseconds (ms)** will be displayed.</li>
            <li>**Failure**: Clicking the box while it is gray ("TOO SOON!") will result in a penalized error.</li>
        </ul>
        <p>Your goal is to achieve the lowest possible best time and a low average time.</p>
    </div>
</div>

<div id="settingsModal" class="floating-modal">
    <div class="modal-header">
        <span> ‚öôÔ∏è SYSTEM SETTINGS</span>
        <button class="chat-close-btn" onclick="closeSettingsModal()"> ‚úï </button>
    </div>
    <div class="modal-body">
        <h4>INTERFACE PREFERENCES</h4>
        <div class="setting-row">
            <label for="themeToggle">Light Mode</label>
            <input type="checkbox" id="themeToggle">
        </div>
        <div class="setting-row" style="border-bottom: none;">
            <label for="soundToggle">Sound Effects (Click/Error)</label>
            <input type="checkbox" id="soundToggle" checked>
        </div>

        <button onclick="reactionTest.resetGame()" style="background: var(--color-error); margin-top: 15px; width: 100%;">WIPE ALL STATS</button>
    </div>
</div>

<div id="supportModal" class="floating-modal">
    <div class="modal-header">
        <span> üí¨ AI Assistant: Protocol Support</span>
        <button class="chat-close-btn" onclick="closeSupportModal()"> ‚úï </button>
    </div>
    <div id="supportBody" class="modal-body">
        </div>

    <div id="support-menu-options-template" style="display:none;">
        <button class="chat-option-btn" onclick="reactionTest.handleMenuSelection('stats', this)"> üìà Check Protocol Metrics (Stats)</button>
        <button class="chat-option-btn" onclick="reactionTest.handleMenuSelection('faq', this)"> ‚ùì Review Support FAQ</button>
        <button class="chat-option-btn" onclick="reactionTest.handleMenuSelection('lore', this)"> üåê Read Mission Briefing (Lore)</button>
    </div>

    <div id="supportContentArea" style="display: none;">
        <div id="statsPanelContent" class="chat-info-panel">
            <h4>PROTOCOL METRICS</h4>
            <p>Best Time: <span id="stat-best-time">N/A</span></p>
            <p>Average Time: <span id="stat-avg-time">N/A</span></p>
            <p>Total Attempts: <span id="stat-attempts">0</span></p>
            <button onclick="reactionTest.resetGame()" style="background: var(--color-error); margin-top: 15px; width: 100%;">WIPE ALL STATS</button>
            <button onclick="reactionTest.returnToMainMenu()" style="background: var(--color-primary); margin-top: 8px; width: 100%;">BACK TO MENU</button>
        </div>
        <div id="faqPanelContent" class="chat-info-panel">
            <h4>SUPPORT FAQ</h4>
            <p><strong>Q: Why did I get a "TOO SOON!" error?</strong></p>
            <p>A: The system requires you to wait until the stimulus (GREEN color) appears. Clicking while the box is GRAY (the 'waiting' phase) counts as an error and ends the test round.</p>
            <button onclick="reactionTest.returnToMainMenu()" style="background: var(--color-primary); margin-top: 8px; width: 100%;">BACK TO MENU</button>
        </div>
        <div id="lorePanelContent" class="chat-info-panel">
            <h4>MISSION BRIEFING</h4>
            <p style="font-style: italic;">"The Reaction Test Protocol assesses the latency of human psychomotor response. Users must demonstrate minimal delay between environmental stimulus detection and motor command execution. Optimal scores are critical for command clearance."</p>
            <button onclick="reactionTest.returnToMainMenu()" style="background: var(--color-primary); margin-top: 8px; width: 100%;">BACK TO MENU</button>
        </div>
    </div>
</div>

<div id="game-box">

    <h2>‚ö° Reaction Test Protocol</h2>

    <p id="result-display">
        AVERAGE TIME: <span id="avgTime">N/A</span> |
        üèÜ BEST TIME: <span id="bestTime">N/A</span>
    </p>

    <div id="reaction-area" onclick="reactionTest.handleUserClick()">
        <span id="status-text">CLICK START</span>
        <span id="instruction-text">Tap the box when it turns **GREEN**</span>
    </div>

    <button id="startBtn" onclick="reactionTest.startGame()">‚ñ∂Ô∏è START TEST</button>
    <button id="resetBtn" onclick="reactionTest.resetGame()" style="display: none;">RESET SCORES</button>

</div>

<div id="footer">
    Developed & Branded by Aarav Sinha
</div>

<script>
// --- CORE ELEMENTS ---
const reactionArea = document.getElementById('reaction-area');
const statusText = document.getElementById('status-text');
const instructionText = document.getElementById('instruction-text');
const startBtn = document.getElementById('startBtn');
const resetBtn = document.getElementById('resetBtn');
const avgTimeDisplay = document.getElementById('avgTime');
const bestTimeDisplay = document.getElementById('bestTime');
const themeToggle = document.getElementById('themeToggle');
const soundToggle = document.getElementById('soundToggle');
const instructionsBox = document.getElementById("instructions");
const settingsModal = document.getElementById("settingsModal");
const supportModal = document.getElementById("supportModal");
const supportBody = document.getElementById('supportBody');
const supportMenuTemplate = document.getElementById('support-menu-options-template');
const supportContentArea = document.getElementById('supportContentArea');


// --- GLOBAL STATE & UTILITIES ---
let stats = {
    soundEnabled: true,
    theme: 'dark'
};
const body = document.body;

const TONE_FREQS = {
    'READY': 880.0, // High pitch for Go (A5)
    'ERROR': 110.0, // Low pitch for Too Soon (A2)
};

const AudioContext = window.AudioContext || window.webkitAudioContext;
let audioCtx;
function ensureAudioContext() {
    if (!audioCtx) {
        audioCtx = new AudioContext();
    }
}
function generateTone(frequency, duration_ms = 100, waveType = 'sine', decay = 0.05) {
    if (!stats.soundEnabled) return;

    ensureAudioContext();

    const oscillator = audioCtx.createOscillator();
    const gainNode = audioCtx.createGain();
    oscillator.type = waveType;
    oscillator.frequency.setValueAtTime(frequency, audioCtx.currentTime);

    oscillator.connect(gainNode);
    gainNode.connect(audioCtx.destination);

    const now = audioCtx.currentTime;
    const duration_s = duration_ms / 1000;

    gainNode.gain.setValueAtTime(0.5, now); // Slightly reduced volume
    gainNode.gain.exponentialRampToValueAtTime(0.001, now + duration_s + decay);
    oscillator.start();
    oscillator.stop(now + duration_s + decay);
}

// --- GAME LOGIC: REACTION TEST PROTOCOL ---

const reactionTest = {
    state: 'initial', // 'initial', 'waiting', 'ready', 'result', 'error'
    startTime: null,
    timeoutId: null,
    reactionTimes: [],
    bestTimeKey: 'reactionTestBestTime',

    loadStats: function() {
        const storedStats = localStorage.getItem('reactionTestStats');
        if (storedStats) {
            const loadedStats = JSON.parse(storedStats);
            stats.theme = loadedStats.theme || 'dark';
            stats.soundEnabled = loadedStats.soundEnabled !== undefined ? loadedStats.soundEnabled : true;
        }

        // Apply theme and sound setting
        if (stats.theme === 'light') {
            body.classList.add('light-mode');
            themeToggle.checked = true;
        } else {
            body.classList.remove('light-mode');
            themeToggle.checked = false;
        }
        soundToggle.checked = stats.soundEnabled;


        const storedBest = localStorage.getItem(this.bestTimeKey);
        this.reactionTimes = JSON.parse(localStorage.getItem('reactionTimes') || '[]');

        if (storedBest && storedBest !== 'N/A') {
            bestTimeDisplay.textContent = `${storedBest}ms`;
        } else {
            bestTimeDisplay.textContent = 'N/A';
        }
        this.updateAverage();
        this.populateSupportModal();
    },

    saveStats: function() {
        localStorage.setItem('reactionTestStats', JSON.stringify(stats));

        const bestTimeValue = this.reactionTimes.length > 0 ? Math.min(...this.reactionTimes).toFixed(0) : 'N/A';
        localStorage.setItem(this.bestTimeKey, bestTimeValue);
        localStorage.setItem('reactionTimes', JSON.stringify(this.reactionTimes));

        // Update score displays
        bestTimeDisplay.textContent = `${bestTimeValue}ms`;
        this.updateAverage();
    },

    updateAverage: function() {
        if (this.reactionTimes.length === 0) {
            avgTimeDisplay.textContent = 'N/A';
            return;
        }
        const sum = this.reactionTimes.reduce((a, b) => a + b, 0);
        const avg = sum / this.reactionTimes.length;
        avgTimeDisplay.textContent = `${avg.toFixed(0)}ms (${this.reactionTimes.length} tests)`;
    },

    startGame: function() {
        if (this.state !== 'initial' && this.state !== 'result' && this.state !== 'error') return;

        this.changeState('waiting');
        
        startBtn.style.display = 'none';
        resetBtn.style.display = 'inline-block';

        // Random delay between 1000ms and 5000ms
        const delay = Math.random() * 4000 + 1000; 

        this.timeoutId = setTimeout(() => {
            this.changeState('ready');
            this.startTime = performance.now();
            generateTone(TONE_FREQS['READY'], 150, 'sine', 0.1); // Ready sound cue
        }, delay);
    },

    handleUserClick: function() {
        if (this.state === 'initial') {
            this.startGame();
        } else if (this.state === 'waiting') {
            clearTimeout(this.timeoutId);
            this.changeState('error');
            generateTone(TONE_FREQS['ERROR'], 400, 'sawtooth', 0.1); // Error sound cue
            statusText.textContent = 'TOO SOON!';
            instructionText.textContent = 'Do not click before it turns GREEN. Click the box to try again.';
        } else if (this.state === 'ready') {
            const endTime = performance.now();
            const reactionTime = endTime - this.startTime;
            this.reactionTimes.push(reactionTime);
            
            this.changeState('result');
            
            // Check for new best time
            const currentBest = parseFloat(localStorage.getItem(this.bestTimeKey)) || Infinity;
            if (reactionTime < currentBest) {
                // Flash success color
                reactionArea.style.backgroundColor = 'var(--color-success)'; 
                setTimeout(() => {
                    reactionArea.style.backgroundColor = 'var(--color-primary)';
                }, 300);
            }

            statusText.textContent = `${reactionTime.toFixed(0)}ms`;
            instructionText.textContent = `Your reaction time. Click to test again.`;

            this.saveStats();

        } else if (this.state === 'error' || this.state === 'result') {
             this.startGame();
        }
    },

    changeState: function(newState) {
        reactionArea.classList.remove('state-waiting', 'state-ready', 'state-error');
        this.state = newState;

        if (newState === 'waiting') {
            reactionArea.classList.add('state-waiting');
            statusText.textContent = 'WAITING...';
            instructionText.textContent = 'Get ready to click when the color changes.';
        } else if (newState === 'ready') {
            reactionArea.classList.add('state-ready'); 
            statusText.textContent = 'CLICK NOW!';
            instructionText.textContent = 'Immediate click detected. Processing score...';
        } else if (newState === 'error') {
            reactionArea.classList.add('state-error');
        } else if (newState === 'result') {
             reactionArea.style.backgroundColor = 'var(--color-primary)';
        } else if (newState === 'initial') {
            statusText.textContent = 'CLICK START';
            instructionText.textContent = 'Tap the box when it turns **GREEN**';
            reactionArea.style.backgroundColor = 'var(--color-primary)';
        }
    },

    resetGame: function() {
        if(confirm("Are you sure you want to permanently erase ALL reaction test data?")) {
            localStorage.removeItem(this.bestTimeKey);
            localStorage.removeItem('reactionTimes');
            this.reactionTimes = [];
            
            clearTimeout(this.timeoutId);
            this.state = 'initial';
            this.changeState('initial');

            startBtn.style.display = 'inline-block';
            resetBtn.style.display = 'none';
            this.saveStats(); // Save cleared stats
        }
    },

    // --- AI CHAT / SUPPORT LOGIC ---

    populateSupportModal: function() {
        supportBody.innerHTML = '';
        const initialMessage = document.createElement('div');
        initialMessage.className = 'ai-message';
        initialMessage.innerHTML = 'Hello User. I am the Protocol Support AI. How may I assist with the Reaction Test module?';
        supportBody.appendChild(initialMessage);

        const menuOptions = supportMenuTemplate.cloneNode(true);
        menuOptions.id = 'support-menu-options'; 
        menuOptions.style.display = 'block';
        supportBody.appendChild(menuOptions);

        supportContentArea.style.display = 'none';
    },

    handleMenuSelection: function(selection) {
        supportBody.style.display = 'none';
        supportContentArea.style.display = 'block';

        const panels = supportContentArea.querySelectorAll('.chat-info-panel');
        panels.forEach(p => p.style.display = 'none');

        // Update Stats Panel data
        document.getElementById('stat-best-time').textContent = bestTimeDisplay.textContent;
        document.getElementById('stat-avg-time').textContent = avgTimeDisplay.textContent;
        document.getElementById('stat-attempts').textContent = this.reactionTimes.length;


        // Show selected panel
        if (selection === 'stats') {
            document.getElementById('statsPanelContent').style.display = 'block';
        } else if (selection === 'faq') {
            document.getElementById('faqPanelContent').style.display = 'block';
        } else if (selection === 'lore') {
            document.getElementById('lorePanelContent').style.display = 'block';
        }
    },

    returnToMainMenu: function() {
        this.populateSupportModal(); 
        supportBody.style.display = 'block';
        supportContentArea.style.display = 'none';
    },
};

// --- GLOBAL EVENT HANDLERS ---

themeToggle.addEventListener('change', () => {
    body.classList.toggle('light-mode');
    stats.theme = body.classList.contains('light-mode') ? 'light' : 'dark';
    reactionTest.saveStats();
});

soundToggle.addEventListener('change', () => {
    stats.soundEnabled = soundToggle.checked;
    reactionTest.saveStats();
});

document.getElementById('infoBtn').addEventListener('click', () => {
    instructionsBox.classList.toggle('visible');
});

function toggleSettingsModal() {
    settingsModal.classList.toggle('visible');
    supportModal.classList.remove('visible');
}

function closeSettingsModal() {
    settingsModal.classList.remove('visible');
}

function toggleSupportModal() {
    supportModal.classList.toggle('visible');
    settingsModal.classList.remove('visible');
    if (supportModal.classList.contains('visible')) {
        reactionTest.populateSupportModal();
    }
}

function closeSupportModal() {
    supportModal.classList.remove('visible');
}

window.onload = function() {
    reactionTest.loadStats();
};
</script>
</body>
</html>